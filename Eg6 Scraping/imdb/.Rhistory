library(rvest) ## scraping tool
library(ggplot2) ## graph
## link must look like the example at the end
## grouped by season
get_data <- function(html){
df <- {}
dfx <- {}
site <- read_html(html)
score <- (site %>% html_elements(".ipl-rating-star__rating") %>% html_text2())
score <- score[score != "Rate"]
score <- score[!score %in% c(as.character(0:10))]
score <- as.numeric(score)
dfx$score <- score
as.data.frame(dfx)
}
getdf <- function(html,seasons){
df <- {}
for (i in 1:seasons){
tempdf <- get_data(paste0(html,i))
tempdf$Season <- paste("Season",i)
df <- rbind(df,tempdf)
}
df$release <- as.numeric(row.names(df))
df <- df[complete.cases(df),]
df$Season <- factor(df$Season, levels = c(unique(df$Season)))
df
}
plotit <- function(name,df, trend = FALSE, line = TRUE){
a <- ggplot(df) + aes(x = release, y = score, color = Season) +
geom_point() +
scale_y_continuous(limits = c(min(df$score)-1,10), breaks = seq(0,10.0,1)) +
theme_fivethirtyeight() +
theme(plot.title = element_text(hjust = 0.5)) +
ggtitle(paste("Score on IMDb of", name)) +
annotate("text",x=Inf,y=-Inf,label="u/FinchoDM",
hjust=1.1,vjust=-0.5,col="grey",cex=4,fontface = "bold", alpha = 0.8)
if (line == TRUE){
a <- a + geom_line()
}
if (trend == TRUE){
a <- a + geom_smooth(alpha = 0.1,method = "loess", aes(color = Season), color = "gray")
}
a
}
naruto <- getdf("https://www.imdb.com/title/tt0409591/episodes?season=", 1)
b10_1 <- getdf("https://www.imdb.com/title/tt0760437/episodes?season=", 4)
b10_2 <- getdf("https://www.imdb.com/title/tt1622696/episodes?season=", 3)
b10_3 <- getdf("https://www.imdb.com/title/tt6148376/episodes?season=", 5)
library(rvest) ## scraping tool
library(ggplot2) ## graph
library(ggthemes) ## make a cuter graph
b10_1 <- getdf("https://www.imdb.com/title/tt0760437/episodes?season=", 4)
b10_2 <- getdf("https://www.imdb.com/title/tt1622696/episodes?season=", 3)
b10_3 <- getdf("https://www.imdb.com/title/tt6148376/episodes?season=", 5)
b10_1$Season <- "Ben 10 (2005)"
b10_2$Season <- "Ben 10: Ultimate Alien (2010)"
b10_3$Season <- "Ben 10 Reboot (2016)"
b10_series <- rbind(b10_1, b10_2, b10_3)
plotit("Ben 10 Series", b10_series)
b10_series$Season <- factor(b10_series$Season, levels=unique(b10_series$Season))
b10_series$release
nrow(b10_series)
1:nrow(b10_series)
b10_series$release <- 1:nrow(b10_series)
plotit("Ben 10 Series", b10_series)
glee<- getdf("https://www.imdb.com/title/tt1327801/episodes?season=", 6)
plotit("Glee", glee)
plotit("Glee", glee, trend = TRUE)
deathnote <- getdf("https://www.imdb.com/title/tt0877057/episodes?seasons=",1)
library(rvest) ## scraping tool
library(ggplot2) ## graph
library(ggthemes) ## make a cuter graph
deathnote <- getdf("https://www.imdb.com/title/tt0877057/episodes?seasons=",1)
plotit("Death Note", deathnote)
